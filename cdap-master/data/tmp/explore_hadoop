#!/usr/bin/env bash
# This file is a hack to set HADOOP_CLASSPATH for Hive local mapreduce tasks.
# This hack should go away when Twill supports setting of environmental variables for a TwillRunnable.

function join { local IFS="$1"; shift; echo "$*"; }
if [ $# -ge 1 -a "$1" = "jar" ]; then
  HADOOP_CLASSPATH=$(join : file:///Users/rsinha/.m2/repository/org/apache/commons/commons-math/2.1/commons-math-2.1.jar file:///Users/rsinha/.m2/repository/org/apache/twill/twill-common/0.7.0-incubating/twill-common-0.7.0-incubating.jar file:///Users/rsinha/work/cdap-repos/cdap-one/cdap-common/target/classes file:///Users/rsinha/.m2/repository/org/codehaus/janino/commons-compiler/2.7.6/commons-compiler-2.7.6.jar file:///Users/rsinha/.m2/repository/log4j/log4j/1.2.17/log4j-1.2.17.jar file:///Users/rsinha/.m2/repository/org/apache/hbase/hbase-client/0.98.6.1-hadoop2/hbase-client-0.98.6.1-hadoop2.jar file:///Users/rsinha/.m2/repository/com/github/stephenc/high-scale-lib/high-scale-lib/1.1.1/high-scale-lib-1.1.1.jar file:///Users/rsinha/.m2/repository/com/google/inject/guice/3.0/guice-3.0.jar file:///Users/rsinha/.m2/repository/org/apache/zookeeper/zookeeper/3.4.5/zookeeper-3.4.5.jar file:///Users/rsinha/.m2/repository/org/apache/hbase/hbase-hadoop-compat/0.98.6.1-hadoop2/hbase-hadoop-compat-0.98.6.1-hadoop2.jar file:///Users/rsinha/.m2/repository/org/ow2/asm/asm-all/5.0.3/asm-all-5.0.3.jar file:///Users/rsinha/.m2/repository/org/apache/hadoop/hadoop-yarn-common/2.3.0/hadoop-yarn-common-2.3.0.jar file:///Users/rsinha/.m2/repository/io/netty/netty/3.6.6.Final/netty-3.6.6.Final.jar file:///Users/rsinha/work/cdap-repos/cdap-one/cdap-proto/target/classes file:///Users/rsinha/.m2/repository/it/unimi/dsi/fastutil/6.5.6/fastutil-6.5.6.jar file:///Users/rsinha/.m2/repository/org/apache/hbase/hbase-server/0.98.6.1-hadoop2/hbase-server-0.98.6.1-hadoop2.jar file:///Users/rsinha/.m2/repository/org/apache/avro/avro/1.6.2/avro-1.6.2.jar file:///Users/rsinha/.m2/repository/org/apache/hadoop/hadoop-mapreduce-client-core/2.3.0/hadoop-mapreduce-client-core-2.3.0.jar file:///Users/rsinha/.m2/repository/org/apache/commons/commons-math3/3.1.1/commons-math3-3.1.1.jar file:///Users/rsinha/.m2/repository/co/cask/tephra/tephra-api/0.7.1/tephra-api-0.7.1.jar file:///Users/rsinha/.m2/repository/com/yammer/metrics/metrics-core/2.2.0/metrics-core-2.2.0.jar file:///Users/rsinha/.m2/repository/org/codehaus/janino/janino/2.7.6/janino-2.7.6.jar file:///Users/rsinha/.m2/repository/org/cloudera/htrace/htrace-core/2.04/htrace-core-2.04.jar file:///Users/rsinha/.m2/repository/javax/inject/javax.inject/1/javax.inject-1.jar file:///Users/rsinha/.m2/repository/com/google/code/gson/gson/2.2.4/gson-2.2.4.jar file:///Users/rsinha/.m2/repository/org/mortbay/jetty/jetty-util/6.1.26/jetty-util-6.1.26.jar file:///Users/rsinha/.m2/repository/org/apache/hadoop/hadoop-annotations/2.3.0/hadoop-annotations-2.3.0.jar file:///Users/rsinha/.m2/repository/org/apache/hbase/hbase-common/0.98.6.1-hadoop2/hbase-common-0.98.6.1-hadoop2.jar file:///Users/rsinha/.m2/repository/org/apache/twill/twill-api/0.7.0-incubating/twill-api-0.7.0-incubating.jar file:///Users/rsinha/.m2/repository/com/jcraft/jsch/0.1.42/jsch-0.1.42.jar file:///Users/rsinha/.m2/repository/javax/servlet/javax.servlet-api/3.0.1/javax.servlet-api-3.0.1.jar file:///Users/rsinha/.m2/repository/xmlenc/xmlenc/0.52/xmlenc-0.52.jar file:///Users/rsinha/.m2/repository/org/slf4j/slf4j-api/1.7.5/slf4j-api-1.7.5.jar file:///Users/rsinha/.m2/repository/commons-beanutils/commons-beanutils-core/1.8.3/commons-beanutils-core-1.8.3.jar file:///Users/rsinha/.m2/repository/log4j/apache-log4j-extras/1.2.17/apache-log4j-extras-1.2.17.jar file:///Users/rsinha/.m2/repository/javax/ws/rs/javax.ws.rs-api/2.0/javax.ws.rs-api-2.0.jar file:///Users/rsinha/work/cdap-repos/cdap-one/cdap-hbase-compat-0.98/target/classes file:///Users/rsinha/.m2/repository/org/apache/hadoop/hadoop-common/2.3.0/hadoop-common-2.3.0.jar file:///Users/rsinha/.m2/repository/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar file:///Users/rsinha/.m2/repository/org/apache/twill/twill-core/0.7.0-incubating/twill-core-0.7.0-incubating.jar file:///Users/rsinha/.m2/repository/org/apache/hbase/hbase-protocol/0.98.6.1-hadoop2/hbase-protocol-0.98.6.1-hadoop2.jar file:///Users/rsinha/.m2/repository/org/apache/thrift/libthrift/0.9.3/libthrift-0.9.3.jar file:///Users/rsinha/work/cdap-repos/cdap-one/cdap-data-fabric/target/classes file:///Users/rsinha/.m2/repository/org/apache/hadoop/hadoop-hdfs/2.3.0/hadoop-hdfs-2.3.0.jar file:///Users/rsinha/.m2/repository/commons-configuration/commons-configuration/1.6/commons-configuration-1.6.jar file:///Users/rsinha/.m2/repository/aopalliance/aopalliance/1.0/aopalliance-1.0.jar file:///Users/rsinha/.m2/repository/commons-net/commons-net/3.1/commons-net-3.1.jar file:///Users/rsinha/work/cdap-repos/cdap-one/cdap-api/target/classes file:///Users/rsinha/.m2/repository/commons-io/commons-io/2.4/commons-io-2.4.jar file:///Users/rsinha/.m2/repository/ch/qos/logback/logback-classic/1.0.9/logback-classic-1.0.9.jar file:///Users/rsinha/.m2/repository/com/google/code/findbugs/jsr305/2.0.1/jsr305-2.0.1.jar file:///Users/rsinha/.m2/repository/com/google/guava/guava/13.0.1/guava-13.0.1.jar file:///Users/rsinha/.m2/repository/commons-cli/commons-cli/1.2/commons-cli-1.2.jar file:///Users/rsinha/.m2/repository/commons-codec/commons-codec/1.6/commons-codec-1.6.jar file:///Users/rsinha/.m2/repository/org/apache/hadoop/hadoop-auth/2.2.0/hadoop-auth-2.2.0.jar file:///Users/rsinha/.m2/repository/com/thoughtworks/paranamer/paranamer/2.3/paranamer-2.3.jar file:///Users/rsinha/.m2/repository/org/apache/commons/commons-compress/1.9/commons-compress-1.9.jar file:///Users/rsinha/.m2/repository/commons-httpclient/commons-httpclient/3.1/commons-httpclient-3.1.jar file:///Users/rsinha/work/cdap-repos/cdap-one/cdap-api-common/target/classes file:///Users/rsinha/.m2/repository/co/cask/tephra/tephra-core/0.7.1/tephra-core-0.7.1.jar file:///Users/rsinha/.m2/repository/org/slf4j/jcl-over-slf4j/1.7.5/jcl-over-slf4j-1.7.5.jar file:///Users/rsinha/.m2/repository/co/cask/tephra/tephra-hbase-compat-0.98/0.7.1/tephra-hbase-compat-0.98-0.7.1.jar file:///Users/rsinha/.m2/repository/org/jamon/jamon-runtime/2.3.1/jamon-runtime-2.3.1.jar file:///Users/rsinha/.m2/repository/ch/qos/logback/logback-core/1.0.9/logback-core-1.0.9.jar file:///Users/rsinha/work/cdap-repos/cdap-one/cdap-notifications-api/target/classes file:///Users/rsinha/work/cdap-repos/cdap-one/cdap-formats/target/classes file:///Users/rsinha/.m2/repository/org/apache/commons/commons-lang3/3.1/commons-lang3-3.1.jar file:///Users/rsinha/.m2/repository/co/cask/common/common-io/0.7.1/common-io-0.7.1.jar file:///Users/rsinha/.m2/repository/org/iq80/leveldb/leveldb-api/0.6/leveldb-api-0.6.jar file:///Users/rsinha/.m2/repository/com/google/inject/extensions/guice-assistedinject/3.0/guice-assistedinject-3.0.jar file:///Users/rsinha/work/cdap-repos/cdap-one/cdap-explore/target/classes file:///Users/rsinha/.m2/repository/com/101tec/zkclient/0.3/zkclient-0.3.jar file:///Users/rsinha/.m2/repository/org/apache/twill/twill-zookeeper/0.7.0-incubating/twill-zookeeper-0.7.0-incubating.jar file:///Users/rsinha/.m2/repository/org/apache/twill/twill-discovery-core/0.7.0-incubating/twill-discovery-core-0.7.0-incubating.jar file:///Users/rsinha/.m2/repository/org/apache/twill/twill-yarn/0.7.0-incubating/twill-yarn-0.7.0-incubating.jar file:///Users/rsinha/.m2/repository/org/apache/kafka/kafka-clients/0.8.2.2/kafka-clients-0.8.2.2.jar file:///Users/rsinha/.m2/repository/net/jpountz/lz4/lz4/1.2.0/lz4-1.2.0.jar file:///Users/rsinha/.m2/repository/org/apache/twill/twill-discovery-api/0.7.0-incubating/twill-discovery-api-0.7.0-incubating.jar file:///Users/rsinha/.m2/repository/com/github/tony19/named-regexp/0.2.3/named-regexp-0.2.3.jar file:///Users/rsinha/.m2/repository/org/iq80/leveldb/leveldb/0.6/leveldb-0.6.jar file:///Users/rsinha/.m2/repository/org/scala-lang/scala-library/2.10.4/scala-library-2.10.4.jar file:///Users/rsinha/.m2/repository/io/dropwizard/metrics/metrics-core/3.1.0/metrics-core-3.1.0.jar file:///Users/rsinha/.m2/repository/io/thekraken/grok/0.1.0/grok-0.1.0.jar file:///Users/rsinha/.m2/repository/net/sf/jopt-simple/jopt-simple/3.2/jopt-simple-3.2.jar file:///Users/rsinha/work/cdap-repos/cdap-one/cdap-explore-client/target/classes file:///Users/rsinha/.m2/repository/co/cask/common/common-http/0.7.1/common-http-0.7.1.jar file:///Users/rsinha/.m2/repository/org/xerial/snappy/snappy-java/1.1.1.7/snappy-java-1.1.1.7.jar file:///Users/rsinha/work/cdap-repos/cdap-one/cdap-security/target/classes file:///Users/rsinha/work/cdap-repos/cdap-one/cdap-security-spi/target/classes file:///Users/rsinha/work/cdap-repos/cdap-one/cdap-app-fabric/target/classes file:///Users/rsinha/work/cdap-repos/cdap-one/cdap-spi/target/classes file:///Users/rsinha/.m2/repository/org/apache/hadoop/hadoop-yarn-api/2.3.0/hadoop-yarn-api-2.3.0.jar file:///Users/rsinha/.m2/repository/co/cask/common/common-lang/0.7.1/common-lang-0.7.1.jar file:///Users/rsinha/work/cdap-repos/cdap-one/cdap-watchdog-api/target/classes file:///Users/rsinha/.m2/repository/org/apache/kafka/kafka_2.10/0.8.2.2/kafka_2.10-0.8.2.2.jar /Users/rsinha/.m2/repository/org/apache/hive/hive-exec/1.2.1/hive-exec-1.2.1.jar ${HADOOP_CLASSPATH} /Users/rsinha/.m2/repository/org/apache/hbase/hbase-protocol/0.98.6.1-hadoop2/hbase-protocol-0.98.6.1-hadoop2.jar)
  # Put user jars first in Hadoop classpath so that the ASM jar needed by Twill has
  # the right version, and not the one provided with the Hadoop libs.
  export HADOOP_USER_CLASSPATH_FIRST=true
  export HADOOP_CLASSPATH
  echo "Explore modified HADOOP_CLASSPATH = $HADOOP_CLASSPATH" 1>&2
fi

exec /usr/bin/hadoop "$@"
